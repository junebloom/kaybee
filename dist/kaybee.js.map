{"version":3,"file":"kaybee.js","sources":["../src/index.js","../node_modules/eventemitter3/index.js"],"sourcesContent":["import EventEmitter from 'eventemitter3'\n\nexport default class Kaybee extends EventEmitter {\n  constructor (options) {\n    super()\n\n    this.options = {\n      renameKeys: options.renameKeys || true\n    }\n\n    this.pressedKeys = {}\n    this.pressedCodes = {}\n\n    document.addEventListener('keydown', this.handleKeyEvent)\n    document.addEventListener('keyup', this.handleKeyEvent)\n  }\n\n  isKeyDown (key) { return this.pressedKeys[key] || false }\n  isCodeDown (code) { return this.pressedCodes[code] || false }\n\n  handleKeyEvent (event) {\n    if (event.repeat) return\n    const pressed = event.type === 'keydown'\n    const key = this.getKeyName(event.key)\n    const code = event.code\n\n    this.pressedKeys[key] = pressed\n    this.pressedCodes[code] = pressed\n\n    this.emit(event.type, key, code)\n  }\n\n  getKeyName (key) {\n    if (this.options.renameKeys) return Kaybee.transformKeyName(key)\n    else return key\n  }\n\n  static transformKeyName (key) {\n    return key\n      .toLowerCase()\n      .replace(/^arrow/, '')\n      .replace(/(^\\s$)|spacebar/, 'space')\n  }\n}\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @api private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {Mixed} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @api private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @api public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @api public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Boolean} exists Only check if there are listeners.\n * @returns {Array|Boolean}\n * @api public\n */\nEventEmitter.prototype.listeners = function listeners(event, exists) {\n  var evt = prefix ? prefix + event : event\n    , available = this._events[evt];\n\n  if (exists) return !!available;\n  if (!available) return [];\n  if (available.fn) return [available.fn];\n\n  for (var i = 0, l = available.length, ee = new Array(l); i < l; i++) {\n    ee[i] = available[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @api public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Function} fn The listener function.\n * @param {Mixed} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  var listener = new EE(fn, context || this)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) this._events[evt] = listener, this._eventsCount++;\n  else if (!this._events[evt].fn) this._events[evt].push(listener);\n  else this._events[evt] = [this._events[evt], listener];\n\n  return this;\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Function} fn The listener function.\n * @param {Mixed} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  var listener = new EE(fn, context || this, true)\n    , evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) this._events[evt] = listener, this._eventsCount++;\n  else if (!this._events[evt].fn) this._events[evt].push(listener);\n  else this._events[evt] = [this._events[evt], listener];\n\n  return this;\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {String|Symbol} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {Mixed} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    if (--this._eventsCount === 0) this._events = new Events();\n    else delete this._events[evt];\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n         listeners.fn === fn\n      && (!once || listeners.once)\n      && (!context || listeners.context === context)\n    ) {\n      if (--this._eventsCount === 0) this._events = new Events();\n      else delete this._events[evt];\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n           listeners[i].fn !== fn\n        || (once && !listeners[i].once)\n        || (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else if (--this._eventsCount === 0) this._events = new Events();\n    else delete this._events[evt];\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {String|Symbol} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @api public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) {\n      if (--this._eventsCount === 0) this._events = new Events();\n      else delete this._events[evt];\n    }\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// This function doesn't apply anymore.\n//\nEventEmitter.prototype.setMaxListeners = function setMaxListeners() {\n  return this;\n};\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n"],"names":["options","super","this","renameKeys","pressedKeys","pressedCodes","document","addEventListener","handleKeyEvent","Kaybee","isKeyDown","key","isCodeDown","code","event","repeat","const","pressed","type","getKeyName","emit","transformKeyName","toLowerCase","replace","Events","EE","fn","context","once","EventEmitter","_events","_eventsCount","has","Object","prototype","hasOwnProperty","prefix","create","__proto__","eventNames","events","name","names","call","push","slice","getOwnPropertySymbols","concat","listeners","exists","evt","available","i","l","length","ee","Array","a1","a2","a3","a4","a5","args","len","arguments","removeListener","undefined","apply","j","on","listener","removeAllListeners","off","addListener","setMaxListeners","prefixed","module"],"mappings":"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"}