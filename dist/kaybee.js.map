{"version":3,"file":"kaybee.js","sources":["../src/kaybee.js"],"sourcesContent":["export function normalizeKeyName(key) {\n  return key\n    .toLowerCase() // Make all names lowercase.\n    .replace(/^arrow/, \"\") // Remove prefix for arrow keys.\n    .replace(/(^\\s$)|spacebar/, \"space\"); // Give space a reasonable name.\n}\n\nexport function start({\n  element = window, // The element to listen for KeyboardEvents on.\n  renameKeys = true, // Whether to normalize key names.\n  enableRepeat = false, // Whether to call onKeyDown on \"repeat\" key events.\n  onKeyDown = () => {}, // Called when a key is pressed.\n  onKeyUp = () => {}, // Called when a key is released.\n}) {\n  // Private API\n  const keys = new Set();\n  const codes = new Set();\n\n  function handleKeyDown({ key, code, repeat }) {\n    const keyName = renameKeys ? normalizeKeyName(key) : key;\n    if (repeat && !enableRepeat) return;\n    keys.add(keyName);\n    codes.add(code);\n    onKeyDown({ key: keyName, code, repeat });\n  }\n\n  function handleKeyUp({ key, code }) {\n    const keyName = renameKeys ? normalizeKeyName(key) : key;\n    keys.delete(keyName);\n    codes.delete(code);\n    onKeyUp({ key: keyName, code });\n  }\n\n  function clear() {\n    keys.clear();\n    codes.clear();\n  }\n\n  element.addEventListener(\"keydown\", handleKeyDown);\n  element.addEventListener(\"keyup\", handleKeyUp);\n  element.addEventListener(\"blur\", clear);\n  if (element !== window) window.addEventListener(\"blur\", clear);\n\n  // Public API\n  return {\n    stop() {\n      element.removeEventListener(\"keydown\", handleKeyDown);\n      element.removeEventListener(\"keyup\", handleKeyUp);\n      element.removeEventListener(\"blur\", clear);\n      if (element !== window) window.removeEventListener(\"blur\", clear);\n    },\n    getKey: (key) => keys.has(key),\n    getCode: (code) => codes.has(code),\n  };\n}\n\nexport default { normalizeKeyName, start };\n"],"names":["normalizeKeyName","key","toLowerCase","replace","start","element","window","renameKeys","enableRepeat","onKeyDown","onKeyUp","keys","Set","codes","handleKeyDown","code","repeat","keyName","add","handleKeyUp","delete","clear","addEventListener","[object Object]","removeEventListener","getKey","has","getCode"],"mappings":"AAAO,SAASA,EAAiBC,GAC/B,OAAOA,EACJC,cACAC,QAAQ,SAAU,IAClBA,QAAQ,kBAAmB,SAGzB,SAASC,GAAMC,QACpBA,EAAUC,OAAMC,WAChBA,GAAa,EAAIC,aACjBA,GAAe,EAAKC,UACpBA,EAAY,SAAQC,QACpBA,EAAU,WAGV,MAAMC,EAAO,IAAIC,IACXC,EAAQ,IAAID,IAElB,SAASE,GAAcb,IAAEA,EAAGc,KAAEA,EAAIC,OAAEA,IAClC,MAAMC,EAAUV,EAAaP,EAAiBC,GAAOA,EACjDe,IAAWR,IACfG,EAAKO,IAAID,GACTJ,EAAMK,IAAIH,GACVN,EAAU,CAAER,IAAKgB,EAASF,KAAAA,EAAMC,OAAAA,KAGlC,SAASG,GAAYlB,IAAEA,EAAGc,KAAEA,IAC1B,MAAME,EAAUV,EAAaP,EAAiBC,GAAOA,EACrDU,EAAKS,OAAOH,GACZJ,EAAMO,OAAOL,GACbL,EAAQ,CAAET,IAAKgB,EAASF,KAAAA,IAG1B,SAASM,IACPV,EAAKU,QACLR,EAAMQ,QASR,OANAhB,EAAQiB,iBAAiB,UAAWR,GACpCT,EAAQiB,iBAAiB,QAASH,GAClCd,EAAQiB,iBAAiB,OAAQD,GAC7BhB,IAAYC,QAAQA,OAAOgB,iBAAiB,OAAQD,GAGjD,CACLE,OACElB,EAAQmB,oBAAoB,UAAWV,GACvCT,EAAQmB,oBAAoB,QAASL,GACrCd,EAAQmB,oBAAoB,OAAQH,GAChChB,IAAYC,QAAQA,OAAOkB,oBAAoB,OAAQH,IAE7DI,OAASxB,GAAQU,EAAKe,IAAIzB,GAC1B0B,QAAUZ,GAASF,EAAMa,IAAIX,IAIjC,MAAe,CAAEf,iBAAAA,EAAkBI,MAAAA"}