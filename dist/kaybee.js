!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.kaybee=t()}(this,function(){"use strict";var e;return function(e){function t(t){void 0===t&&(t={renameKeys:!0}),e.call(this),this.options=t,this.pressedKeys={},this.pressedCodes={},document.addEventListener("keydown",this.handleKeyEvent.bind(this)),document.addEventListener("keyup",this.handleKeyEvent.bind(this))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.isKeyDown=function(e){return this.pressedKeys[e]||!1},t.prototype.isCodeDown=function(e){return this.pressedCodes[e]||!1},t.prototype.handleKeyEvent=function(e){if(!e.repeat){var n="keydown"===e.type,r=this.options.renameKeys?t.transformKeyName(e.key):e.key,o=e.code;this.pressedKeys[r]=n,this.pressedCodes[o]=n,this.emit(e.type,r,o)}},t.transformKeyName=function(e){return e.toLowerCase().replace(/^arrow/,"").replace(/(^\s$)|spacebar/,"space")},t}((function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function o(e,t,r,o,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var i=new function(e,t,n){this.fn=e,this.context=t,this.once=n||!1}(r,o||e,s),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],i]:e._events[c].push(i):(e._events[c]=i,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function i(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),i.prototype.eventNames=function(){var e,r,o=[];if(0===this._eventsCount)return o;for(r in e=this._events)t.call(e,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},i.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,s=r.length,i=new Array(s);o<s;o++)i[o]=r[o].fn;return i},i.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},i.prototype.emit=function(e,t,r,o,s,i){var c=arguments,f=n?n+e:e;if(!this._events[f])return!1;var p,a,u=this._events[f],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,o),!0;case 5:return u.fn.call(u.context,t,r,o,s),!0;case 6:return u.fn.call(u.context,t,r,o,s,i),!0}for(a=1,p=new Array(h-1);a<h;a++)p[a-1]=c[a];u.fn.apply(u.context,p)}else{var l,v=u.length;for(a=0;a<v;a++)switch(u[a].once&&this.removeListener(e,u[a].fn,void 0,!0),h){case 1:u[a].fn.call(u[a].context);break;case 2:u[a].fn.call(u[a].context,t);break;case 3:u[a].fn.call(u[a].context,t,r);break;case 4:u[a].fn.call(u[a].context,t,r,o);break;default:if(!p)for(l=1,p=new Array(h-1);l<h;l++)p[l-1]=c[l];u[a].fn.apply(u[a].context,p)}}return!0},i.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},i.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},i.prototype.removeListener=function(e,t,r,o){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return s(this,i),this;var c=this._events[i];if(c.fn)c.fn!==t||o&&!c.once||r&&c.context!==r||s(this,i);else{for(var f=0,p=[],a=c.length;f<a;f++)(c[f].fn!==t||o&&!c[f].once||r&&c[f].context!==r)&&p.push(c[f]);p.length?this._events[i]=1===p.length?p[0]:p:s(this,i)}return this},i.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&s(this,t)):(this._events=new r,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prefixed=n,i.EventEmitter=i,e.exports=i}(e={exports:{}},e.exports),e.exports))});
